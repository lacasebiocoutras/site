define(["jquery","moment","config-module"],function(n,t,e){function a(n,e){var a=t();e.length>0?a=t(e):n.length>0&&(a=t(n));var i=t(a).hour(o);return!!t().isBefore(i.format())}function i(n,e){var a;a=n.length>0?t(n):t();var i;i=e.length>0?t(e):a;var c=t(a).subtract(1,"days"),r=t(i).hour(o);return!!t().isBetween(c.format(),r.format())}var o=19,c=function(t){var e="#";e=e.concat(t.name_id),a(t.date_debut,t.date_fin)?(n(e).removeClass(window.config.class_invisible_item),i(t.date_debut,t.date_fin)&&n(e).addClass(window.config.class_event_today)):n(e).addClass(window.config.class_invisible_item)},r=window.location.href,d="/";window.location.pathname.indexOf(e.base_url)>-1&&(d=e.base_url);var f=d.concat(e.json_event_coll_ext),u=n.getJSON(f),l=u.then(function(t){window.config=t.config;var e=null;return n.each(t.list,function(n,t){r.indexOf(t.url)>-1&&(e=t.name)}),e}),s=l.then(function(n){return d.concat(n)});s.then(function(t){window.data=n.getJSON(t),window.data.then(function(t){n.each(t,function(n,t){c(t)})})})});