define(["jquery","moment","config-module"],function(n,e,t){function a(n,t,a){var o=e();t.length>0?o=e(t,a):n.length>0&&(o=e(n,a));var i=e(o).hour(c);return!!e().isBefore(i.format())}function o(n,t,a){var o;o=n.length>0?e(n,a):e();var i;i=t.length>0?e(t,a):o;var r=e(o).subtract(1,"days"),f=e(i).hour(c);return!!e().isBetween(r.format(),f.format())}e.locale("fr");var i=["DDMMMMY"],c=19,r=function(t){e.locale("fr");var c="#";c=c.concat(t.name_id),a(t.date_debut,t.date_fin,i)?(n(c).removeClass(window.config.class_invisible_item),o(t.date_debut,t.date_fin,i)&&n(c).addClass(window.config.class_event_today)):n(c).addClass(window.config.class_invisible_item)},f=window.location.href,d="/";window.location.pathname.indexOf(t.base_url)>-1&&(d=t.base_url);var l=d.concat(t.json_event_coll_ext),u=n.getJSON(l),s=u.then(function(e){window.config=e.config;var t=null;return n.each(e.list,function(n,e){f.indexOf(e.url)>-1&&(t=e.name)}),t}),w=s.then(function(n){return d.concat(n)});w.then(function(e){window.data=n.getJSON(e),window.data.then(function(e){n.each(e,function(n,e){r(e)})})})});